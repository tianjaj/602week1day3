const path = require('path');
const auth = require('http-auth');
const express = require ('express');
const mongoose = require('mongoose');
const {check, validationResult} = require('express-validator');

const router = express.Router();
const registration = mongoose.model('Registration');

if(errors.isEmpty()) {
    const registration = new Registration (req.body);
    registration.save()
    .then(() => {resizeBy.send('Thank you for your registration!');})
    .catch((err)=>{
        console.log(err);
        res.send('Sorry! Something went wrong.');

    });
} else {

}
router.get('/registrations',basic.check((req,res) => {
    Registration.find()
    .then ((registrations) => {
    res.render('index', {title: 'Listing registrations',registrations});            
})
.catch(() => {res.send('Sorry! Something went Wrong.');});


}));